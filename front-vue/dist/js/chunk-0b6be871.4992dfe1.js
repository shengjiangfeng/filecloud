(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b6be871"],{"188a":function(e,t,n){},cf45:function(e,t,n){"use strict";function a(e,t){return"链接: "+e+"  提取码: "+t}n.d(t,"a",(function(){return a}))},dfe0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"body"},[n("div",{attrs:{id:"header"}},[0===this.selectedRowKeys.length?[e._v("个人云盘分享链接")]:1===this.selectedRowKeys.length?[n("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.sharedCopyText,expression:"sharedCopyText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.handleCopyOk,expression:"handleCopyOk",arg:"success"}],attrs:{type:"primary",shape:"round",icon:"paper-clip"}},[e._v("复制链接")]),e._v("   "),n("a-button",{attrs:{type:"primary",shape:"round",icon:"stop"},on:{click:e.handleCancel}},[e._v("取消分享")])]:[n("a-button",{attrs:{type:"primary",shape:"round",icon:"stop"},on:{click:e.handleCancel}},[e._v("取消分享")])]],2),n("div",{staticClass:"path"},[e._v("全部文件")]),n("a-table",{attrs:{columns:e.columns,"data-source":e.tableData,pagination:!1,rowKey:function(e){return e.key},"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},customRow:e.customRowFunc},scopedSlots:e._u([{key:"name",fn:function(t,a){return[n("a-icon",{attrs:{type:"appstore"}}),e._v("  "+e._s(e.showName(a))+" ")]}},{key:"status",fn:function(t,a){return[a.key!==e.hoverKey?n("span",[e._v(e._s(e.showDeadline(a))+"后过期")]):n("div",[n("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.hoverCopyText,expression:"hoverCopyText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.handleCopyOk,expression:"handleCopyOk",arg:"success"}]},[n("a-icon",{attrs:{type:"paper-clip"}}),e._v(" 复制链接")],1),e._v("    "),n("a",{on:{click:e.handleCancelKey}},[n("a-icon",{attrs:{type:"stop"}}),e._v(" 取消分享")],1)])]}},{key:"looked",fn:function(t,a){return[a.key!==e.hoverKey?n("span",[e._v(e._s(t))]):e._e()]}}])})],1)},s=[],o=n("b85c"),c=(n("a434"),n("4e82"),n("c1df")),r=n.n(c),i=n("4ec3"),l=n("cf45"),u={name:"sharedlist",data:function(){return{columns:[{title:"文件",width:"45%",scopedSlots:{customRender:"name"}},{title:"分享时间",width:"20%",dataIndex:"createTime",customRender:function(e){return r.a.unix(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"状态",width:"15%",scopedSlots:{customRender:"status"}},{title:"浏览次数",dataIndex:"looked",scopedSlots:{customRender:"looked"}}],selectedRowKeys:[],tableData:[],hoverKey:"",hoverCopyText:"",sharedCopyText:""}},mounted:function(){this.getList()},methods:{onSelectChange:function(e,t){console.log(e,t),this.selectedRowKeys=e,this.sharedCopyTextUpdate()},sharedCopyTextUpdate:function(){if(1===this.selectedRowKeys.length){var e,t=Object(o["a"])(this.tableData);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.key===this.selectedRowKeys[0]){this.sharedCopyText=Object(l["a"])(n.route,n.sharedToken);break}}}catch(a){t.e(a)}finally{t.f()}}},customRowFunc:function(e){var t=this;return{props:{},on:{click:function(n){if("a"!==n.target.localName){var a=t.selectedRowKeys.indexOf(e.key);-1===a?t.selectedRowKeys.push(e.key):t.selectedRowKeys.splice(a,1),t.sharedCopyTextUpdate()}},dblclick:function(){},contextmenu:function(){},mouseenter:function(){t.hoverKey=e.key,t.hoverCopyText=Object(l["a"])(e.route,e.sharedToken)},mouseleave:function(){t.hoverKey=""}}}},showName:function(e){var t=e.filename[0];return e.filename.length>1&&(t+="等"),t},showDeadline:function(e){var t=r.a.unix(e.createTime),n=r.a.unix(e.deadline);return n.to(t,!0)},getList:function(){var e=this;Object(i["l"])({}).then((function(t){for(var n in e.selectedRowKeys=[],e.tableData=[],t)e.tableData.push(t[n]);e.tableData.sort((function(e,t){return e.createTime-t.createTime}))}))},handleCancel:function(){var e=this;0!=this.selectedRowKeys.length&&Object(i["h"])({keys:this.selectedRowKeys}).then((function(){e.$message.success("分享已取消"),e.getList()}))},handleCopyOk:function(){this.$message.success("复制链接成功")},handleCancelKey:function(){var e=this;""!==this.hoverKey&&Object(i["h"])({keys:[this.hoverKey]}).then((function(){e.$message.success("分享已取消"),e.getList()}))}}},d=u,h=(n("ea68"),n("2877")),p=Object(h["a"])(d,a,s,!1,null,null,null);t["default"]=p.exports},ea68:function(e,t,n){"use strict";n("188a")}}]);
//# sourceMappingURL=chunk-0b6be871.4992dfe1.js.map