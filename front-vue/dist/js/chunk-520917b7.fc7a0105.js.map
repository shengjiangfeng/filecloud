{"version":3,"sources":["webpack:///./src/views/FileShared.vue?e0e6","webpack:///src/views/FileShared.vue","webpack:///./src/views/FileShared.vue?d905","webpack:///./src/views/FileShared.vue?e776","webpack:///./src/assets/logo.png","webpack:///./src/views/FileShared.vue?57c4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","sharedChecked","attrs","staticStyle","_v","_s","sharedInfo","name","showDownload","on","handleDownload","showCreateTime","showDeadline","navs","length","$event","goback","goto","_l","v","i","key","_e","columns","tableData","record","index","selectedRowKeys","onChange","onSelectChange","scopedSlots","_u","fn","text","gonext","opacity","background","model","value","callback","$$v","sharedModalToken","expression","type","indexOf","_k","keyCode","handleSharedInfo","apply","arguments","sharedModalValue","directives","rawName","sharedTokenCheckText","staticRenderFns","data","title","dataIndex","width","customRender","selectedNames","sharedToken","sharedKey","sharedTokenCheckFailed","mounted","$route","params","get","then","catch","storage","methods","selectedRows","names","getList","path","sharedList","a","filename","b","pop","dir","push","splice","end","to","start","unix","createTime","format","sharedDownload","downloadElement","document","createElement","href","window","URL","createObjectURL","blob","idx","component","module","exports"],"mappings":"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","file":"js/chunk-520917b7.fc7a0105.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"body\"},[(!_vm.sharedChecked)?_c('div'):_c('div',[_c('div',{attrs:{\"id\":\"header\"}},[_c('div',{attrs:{\"id\":\"header-title\"}},[_c('a-row',{attrs:{\"justify\":\"space-between\",\"type\":\"flex\"}},[_c('a-col',{staticStyle:{\"font-size\":\"20px\"}},[_c('a-icon',{attrs:{\"type\":\"appstore\",\"theme\":\"twoTone\"}}),_vm._v(\"   \"),_c('span',[_vm._v(_vm._s(this.sharedInfo.name))])],1),_c('a-col',{staticStyle:{\"margin-right\":\"40px\"}},[_c('a-button',{attrs:{\"icon\":\"download\",\"disabled\":!_vm.showDownload()},on:{\"click\":_vm.handleDownload}},[_vm._v(\"下载\")])],1)],1)],1),_c('div',{attrs:{\"id\":\"header-time\"}},[_c('a-icon',{attrs:{\"type\":\"clock-circle\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.showCreateTime()))]),_vm._v(\"    \"),_c('span',[_vm._v(\"过期时间：\"+_vm._s(_vm.showDeadline())+\"后\")])],1)]),_c('div',{staticClass:\"path\"},[(_vm.navs.length === 1)?[_vm._v(\" 全部文件 \")]:[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goback()}}},[_vm._v(\"返回上一级\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goto(0)}}},[_vm._v(\"全部文件\")]),_vm._l((_vm.navs),function(v,i){return [(i !== 0)?[(i === _vm.navs.length-1)?[_vm._v(\"  >  \"+_vm._s(v)+\" \")]:[_vm._v(\"  >  \"),_c('a',{key:i,attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goto(i)}}},[_vm._v(_vm._s(v))])]]:_vm._e()]})]],2),_c('a-table',{attrs:{\"columns\":_vm.columns,\"data-source\":_vm.tableData,\"pagination\":false,\"rowKey\":function (record,index) { return index; },\"row-selection\":{selectedRowKeys:_vm.selectedRowKeys,onChange:_vm.onSelectChange}},scopedSlots:_vm._u([{key:\"name\",fn:function(text, record){return [(record.isDir)?_c('a-icon',{attrs:{\"type\":\"folder\"}}):_c('a-icon',{attrs:{\"type\":\"file\"}}),_vm._v(\"    \"),(record.isDir)?_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.gonext(text)}}},[_vm._v(_vm._s(text))]):_c('span',[_vm._v(_vm._s(text))])]}}])})],1),_c('a-modal',{attrs:{\"width\":\"500px\",\"centered\":\"\",\"maskStyle\":{opacity:1,background:'#FCFCFC'},\"maskClosable\":false,\"closable\":false,\"footer\":\"\"},model:{value:(_vm.sharedModalToken),callback:function ($$v) {_vm.sharedModalToken=$$v},expression:\"sharedModalToken\"}},[_c('div',{staticStyle:{\"height\":\"240px\"}},[_c('div',{staticStyle:{\"height\":\"50px\",\"line-height\":\"36px\",\"text-align\":\"center\",\"border-bottom\":\"2px solid #F0F0F0\"}},[_c('img',{staticStyle:{\"width\":\"28px\",\"height\":\"28px\"},attrs:{\"src\":require(\"@/assets/logo.png\"),\"alt\":\"logo\"}}),_vm._v(\"  \"),_c('span',{staticStyle:{\"font-size\":\"24px\",\"font-weight\":\"600\"}},[_vm._v(\"个人云盘\")])]),_c('p',{staticStyle:{\"font-size\":\"16px\",\"margin-top\":\"40px\"}},[_vm._v(\"请输入提取码：\")]),_c('a-input',{staticStyle:{\"width\":\"320px\"},attrs:{\"size\":\"large\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleSharedInfo.apply(null, arguments)}},model:{value:(_vm.sharedModalValue),callback:function ($$v) {_vm.sharedModalValue=$$v},expression:\"sharedModalValue\"}}),_vm._v(\"  \"),_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.handleSharedInfo}},[_vm._v(\"提取文件\")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.sharedTokenCheckFailed),expression:\"this.sharedTokenCheckFailed\"}],staticStyle:{\"color\":\"#FF5151\",\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm.sharedTokenCheckText))])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"body\">\n    <div v-if=\"!sharedChecked\"></div>\n    <div v-else>\n    <div id=\"header\">\n      <div id=\"header-title\">\n        <a-row justify=\"space-between\" type=\"flex\">\n          <a-col style=\"font-size:20px;\">\n            <a-icon type=\"appstore\" theme=\"twoTone\" /> &nbsp; <span>{{this.sharedInfo.name}}</span>\n          </a-col>\n          <a-col  style=\"margin-right:40px\">\n            <a-button icon=\"download\" :disabled=\"!showDownload()\" @click=\"handleDownload\">下载</a-button>\n          </a-col>\n        </a-row>\n        \n      </div>\n      <div id=\"header-time\">\n        <a-icon type=\"clock-circle\" /> <span>{{showCreateTime()}}</span> &nbsp;&nbsp; <span>过期时间：{{showDeadline()}}后</span> \n      </div>\n    </div>\n\n    <div class=\"path\">\n      <template v-if=\"navs.length === 1\">\n        全部文件\n      </template>\n      <template v-else>\n        <a href=\"javascript:;\" @click=\"goback()\">返回上一级</a>\n        <a-divider type=\"vertical\" />\n        <a href=\"javascript:;\" @click=\"goto(0)\">全部文件</a>\n        <template v-for=\"(v,i) of navs\">\n          <template v-if=\"i !== 0\">\n            <template v-if=\"i === navs.length-1\">\n              &nbsp;>&nbsp; {{v}}\n            </template>\n            <template v-else>\n              &nbsp;>&nbsp; <a href=\"javascript:;\" @click=\"goto(i)\" :key=i>{{v}}</a>\n            </template>\n          </template>\n        </template>\n      </template>\n    </div>\n\n    <a-table \n    :columns=\"columns\" \n    :data-source=\"tableData\"\n    :pagination=\"false\"\n    :rowKey=\"(record,index) => index\"\n    :row-selection=\"{selectedRowKeys:selectedRowKeys,onChange:onSelectChange}\"\n    >\n      <template slot=\"name\" slot-scope=\"text, record\">\n        <a-icon type=\"folder\" v-if=\"record.isDir\"/>\n        <a-icon type=\"file\" v-else/>\n        &nbsp;&nbsp;\n          <a v-if=\"record.isDir\" href=\"javascript:;\" @click=\"gonext(text)\">{{text}}</a>\n          <span v-else>{{text}}</span>\n      </template>\n    </a-table>\n    </div>\n\n    <!-- token -->\n    <a-modal \n    v-model=\"sharedModalToken\" \n    width=\"500px\"\n    centered\n    :maskStyle=\"{opacity:1,background:'#FCFCFC'}\"\n    :maskClosable=\"false\"\n    :closable=\"false\"\n    footer=\"\"\n    >\n      <div style=\"height:240px\">\n        <div style=\"height:50px;line-height:36px;text-align:center;border-bottom: 2px solid #F0F0F0;\">\n          <img src=\"@/assets/logo.png\" alt=\"logo\" style=\"width:28px;height:28px;\">&nbsp;\n          <span style=\"font-size:24px;font-weight: 600;\">个人云盘</span>\n        </div>\n        <p style=\"font-size:16px;margin-top:40px\">请输入提取码：</p>\n        <a-input v-model=\"sharedModalValue\" style=\"width:320px\" size=\"large\" @keyup.enter=\"handleSharedInfo\"></a-input>&nbsp;\n        <a-button type=\"primary\" size=\"large\" @click=\"handleSharedInfo\">提取文件</a-button>\n        <p v-show=\"this.sharedTokenCheckFailed\" style=\"color:\t#FF5151;font-size:12px\">{{sharedTokenCheckText}}</p>\n\n      </div>\n    </a-modal>\n  </div>\n</template>\n\n<script>\nimport {\nsharedInfo,\nsharedList,\nsharedDownload,\n} from \"@/api/api\"\nimport moment from 'moment'\nimport  storage from 'store'\n\nexport default {\n  name: 'fileshared',\n  data () {\n    return {\n      columns:[\n        {title:'文件名',dataIndex: 'filename',width:'60%',scopedSlots: { customRender: 'name' }},\n        {title:'大小',dataIndex: 'size'},\n        {title:'修改时间',dataIndex: 'date'},\n      ],\n      selectedRowKeys:[],\n      selectedNames:[],\n\n      sharedChecked:false,\n      sharedToken:\"\",\n      sharedKey:\"\",\n      sharedInfo:{},\n\n      navs :[],\n      tableData:[],\n\n      sharedModalToken:false,\n      sharedModalValue:\"\",\n      sharedTokenCheckFailed:false,\n      sharedTokenCheckText:\"\",\n    }\n  },\n  mounted () {\n    //console.log(this.$route);\n    this.sharedKey = this.$route.params.key\n    this.sharedToken = storage.get(this.sharedKey)\n    \n    if (this.sharedToken){\n      const args = {key:this.sharedKey,sharedToken:this.sharedToken}\n      sharedInfo(args)\n      .then((ret) => {\n        this.sharedInfo = ret\n        this.tableData = ret.items\n        this.navs.push(ret.root)\n        this.sharedChecked = true\n      })\n      .catch(()=>{\n        storage.remove(this.sharedKey)\n        this.sharedModalToken = true\n      })\n    }else{\n      this.sharedModalToken = true\n    }\n  },\n  methods:{\n    onSelectChange (selectedRowKeys, selectedRows)  {\n      //console.log(selectedRowKeys, selectedRows);\n      this.selectedRowKeys = selectedRowKeys\n      let names = [];\n      for (let v of selectedRows){\n        names.push(v.filename)\n      }\n      this.selectedNames = names;\n    },\n    getList(path){\n      sharedList({path:path,key:this.sharedKey,sharedToken:this.sharedToken}).then(res => {\n        this.selectedRowKeys = []\n        this.selectedNames = []\n        this.tableData = res.items;\n        // 排序 目录 > 名字\n        this.tableData.sort((a,b) =>{\n          if ( !a.isDir && b.isDir){\n            return 1\n          }else if (a.isDir == b.isDir){\n            return a.filename > b.filename ? 1 : -1\n          }\n          return -1\n        })\n       //console.log(res);\n      })\n    },\n    goback(){\n      if (this.navs.length > 1) {\n        this.navs.pop()\n        const path = this.navs.join(\"/\")\n        this.getList(path)\n      }\n    },\n    gonext(dir){\n      if (dir !== \"\"){\n        this.navs.push(dir)\n        const path = this.navs.join(\"/\")\n        this.getList(path)\n      }\n    },\n    goto(index){\n      if (index >= 0 && index < this.navs.length ){\n        this.navs.splice(index+1)\n        const path = this.navs.join(\"/\")\n        this.getList(path)\n      }\n    },\n    showDeadline(){\n      let start = moment.unix(this.sharedInfo.createTime)\n      let end = moment.unix(this.sharedInfo.deadline)\n      return end.to(start,true)\n    },\n    showCreateTime(){\n      return moment.unix(this.sharedInfo.createTime).format('YYYY-MM-DD HH:mm:ss')\n    },\n    handleSharedInfo(){\n      const args = {key:this.sharedKey,sharedToken:this.sharedModalValue}\n      sharedInfo(args)\n      .then((ret) => {\n        //console.log(ret);\n        this.sharedModalToken = false\n        this.sharedToken = args.sharedToken\n        storage.set(this.sharedKey,this.sharedToken,12 * 60 *60 * 1000)\n        this.sharedInfo = ret\n        this.tableData = ret.items\n        this.navs.push(ret.root)\n        this.sharedChecked = true\n      })\n      .catch((err)=>{\n        this.sharedTokenCheckFailed = true\n        this.sharedTokenCheckText = err.data.message\n      })\n    },\n    showDownload(){\n      if (this.selectedRowKeys.length > 0){\n        for (var idx of this.selectedRowKeys){\n          if (this.tableData[idx].isDir){\n            return false\n          }\n        }\n        return true\n      }\n      return false\n    },\n    handleDownload(){\n      if (this.showDownload()){\n        for (var idx in this.selectedNames){\n          const filename = this.selectedNames[idx]\n          const args = {key:this.sharedKey,sharedToken:this.sharedToken,path:this.navs.join(\"/\"),filename:filename}\n          sharedDownload(args).then(res =>{\n            //console.log(res);\n            const blob = new Blob([res.data]);\n\n            var downloadElement = document.createElement(\"a\");\n            var href = window.URL.createObjectURL(blob);\n            downloadElement.href = href;\n            downloadElement.download = decodeURIComponent(filename);\n            document.body.appendChild(downloadElement);\n            downloadElement.click();\n            document.body.removeChild(downloadElement);\n            window.URL.revokeObjectURL(href); \n          })\n        }\n      }\n    },\n  },\n}\n</script>\n<style>\n.body{\n  padding:10px 30px;\n}\n#header{\n  height:86px;\n  margin-bottom:10px;\n  border-bottom: 1px solid #F0F0F0;\n}\n\n#header-title{\n  height:60px;\n  line-height:60px;\n}\n\n.path{\n  margin-bottom:10px;\n}\n\n/* 滚动条宽度 */\n::-webkit-scrollbar {\n width: 7px;\n height: 10px;\n}\n/* 滚动条的滑块 */\n::-webkit-scrollbar-thumb {\n background-color: #a1a3a9;\n border-radius: 3px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileShared.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileShared.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileShared.vue?vue&type=template&id=116e10f7&\"\nimport script from \"./FileShared.vue?vue&type=script&lang=js&\"\nexport * from \"./FileShared.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FileShared.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/logo.8dafbfe5.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileShared.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}