(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81b2232c"],{"188a":function(e,t,a){},dfe0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("div",{attrs:{id:"header"}},[0===this.selectedRowKeys.length?[e._v("个人云盘分享链接")]:1===this.selectedRowKeys.length?[a("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.sharedCopyText,expression:"sharedCopyText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.handleCopyOk,expression:"handleCopyOk",arg:"success"}],attrs:{type:"primary",shape:"round",icon:"paper-clip"}},[e._v("复制链接")]),e._v("   "),a("a-button",{attrs:{type:"primary",shape:"round",icon:"stop"},on:{click:e.handleCancel}},[e._v("取消分享")])]:[a("a-button",{attrs:{type:"primary",shape:"round",icon:"stop"},on:{click:e.handleCancel}},[e._v("取消分享")])]],2),a("div",{staticClass:"path"},[e._v("全部文件")]),a("a-table",{attrs:{columns:e.columns,"data-source":e.tableData,pagination:!1,rowKey:function(e){return e.key},"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},customRow:e.customRowFunc},scopedSlots:e._u([{key:"name",fn:function(t,s){return[a("a-icon",{attrs:{type:"appstore"}}),e._v("  "+e._s(e.showName(s))+" ")]}},{key:"status",fn:function(t,s){return[s.key!==e.hoverKey?a("span",[e._v(e._s(e.showDeadline(s))+"后过期")]):a("div",[a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.hoverCopyText,expression:"hoverCopyText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.handleCopyOk,expression:"handleCopyOk",arg:"success"}]},[a("a-icon",{attrs:{type:"paper-clip"}}),e._v(" 复制链接")],1),e._v("    "),a("a",{on:{click:e.handleCancelKey}},[a("a-icon",{attrs:{type:"stop"}}),e._v(" 取消分享")],1)])]}},{key:"looked",fn:function(t,s){return[s.key!==e.hoverKey?a("span",[e._v(e._s(t))]):e._e()]}}])})],1)},n=[],o=a("b85c"),c=(a("a434"),a("4e82"),a("c1df")),i=a.n(c),r=a("4ec3"),l={name:"sharedlist",data:function(){return{columns:[{title:"文件",width:"45%",scopedSlots:{customRender:"name"}},{title:"分享时间",width:"20%",dataIndex:"createTime",customRender:function(e){return i.a.unix(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"状态",width:"15%",scopedSlots:{customRender:"status"}},{title:"浏览次数",dataIndex:"looked",scopedSlots:{customRender:"looked"}}],selectedRowKeys:[],tableData:[],hoverKey:"",hoverCopyText:"",sharedCopyText:""}},mounted:function(){this.getList()},methods:{onSelectChange:function(e,t){console.log(e,t),this.selectedRowKeys=e,this.sharedCopyTextUpdate()},sharedCopyTextUpdate:function(){if(1===this.selectedRowKeys.length){var e,t=Object(o["a"])(this.tableData);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.key===this.selectedRowKeys[0]){this.sharedCopyText="链接: "+a.route+"  提取码: "+a.sharedToken;break}}}catch(s){t.e(s)}finally{t.f()}}},customRowFunc:function(e){var t=this;return{props:{},on:{click:function(a){if("a"!==a.target.localName){var s=t.selectedRowKeys.indexOf(e.key);-1===s?t.selectedRowKeys.push(e.key):t.selectedRowKeys.splice(s,1),t.sharedCopyTextUpdate()}},dblclick:function(){},contextmenu:function(){},mouseenter:function(){t.hoverKey=e.key,t.hoverCopyText="链接: "+e.route+"  提取码: "+e.sharedToken},mouseleave:function(){t.hoverKey=""}}}},showName:function(e){var t=e.filename[0];return e.filename.length>1&&(t+="等"),t},showDeadline:function(e){var t=i.a.unix(e.createTime),a=i.a.unix(e.deadline);return a.to(t,!0)},getList:function(){var e=this;Object(r["l"])({}).then((function(t){for(var a in e.selectedRowKeys=[],e.tableData=[],t)e.tableData.push(t[a]);e.tableData.sort((function(e,t){return e.createTime-t.createTime}))}))},handleCancel:function(){var e=this;0!=this.selectedRowKeys.length&&Object(r["h"])({keys:this.selectedRowKeys}).then((function(){e.$message.success("分享已取消"),e.getList()}))},handleCopyOk:function(){this.$message.success("复制链接成功")},handleCancelKey:function(){var e=this;""!==this.hoverKey&&Object(r["h"])({keys:[this.hoverKey]}).then((function(){e.$message.success("分享已取消"),e.getList()}))}}},u=l,d=(a("ea68"),a("2877")),h=Object(d["a"])(u,s,n,!1,null,null,null);t["default"]=h.exports},ea68:function(e,t,a){"use strict";a("188a")}}]);
//# sourceMappingURL=chunk-81b2232c.9f6b3bbd.js.map